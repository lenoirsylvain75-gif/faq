<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FAQ Volkswagen ‚Äì Assistant IA</title>
  <style>
    :root{--vw-navy:#0a1a2b;--vw-blue:#081d4d;--vw-text:#0b1320;--vw-muted:#5c6b80;--vw-border:#e5e8ee;--vw-bg:#ffffff;--radius:12px;--shadow:0 0 0 rgba(0,0,0,0);}
    html,body{margin:0;background:var(--vw-bg);color:var(--vw-text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    header, footer{width:100%;margin:0;padding:0}
    header img, footer img{width:100%;height:auto;display:block}
    .container{max-width:980px;margin:48px auto;padding:0 20px}
    h1{font-weight:800;letter-spacing:-.01em;font-size:clamp(28px,4vw,40px);color:var(--vw-navy);margin:0 0 8px}
    .faq{display:block}
    .faq-item{border-bottom:1px solid var(--vw-border);background:transparent}
    .faq-item header{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:22px 0;cursor:pointer}
    .faq-item h3{margin:0;font-size:20px;font-weight:700;color:var(--vw-navy)}
    .faq-item header .chev{transition:transform .2s ease;min-width:22px}
    .faq-item[open] header .chev{transform:rotate(180deg)}
    .faq-panel{padding:0 0 22px 0;display:none}
    .faq-item[open] .faq-panel{display:block}
    .answer{margin:8px 0 0;color:var(--vw-text)}
    .msg{display:flex;gap:12px;margin:10px 0}
    .avatar{display:none}
    .bubble{flex:1;background:#f4f7fd;border:1px solid var(--vw-border);padding:12px;border-radius:12px}
    .msg.user .bubble{background:#eef7ff}
    #llm-thread{max-height:320px;overflow:auto;border:1px solid var(--vw-border);border-radius:12px;background:#fff;padding:10px}
    .input {
      flex: 1;
      border: 2px solid var(--vw-blue);
      border-radius: 999px;
      padding: 14px 16px;
      font-size: 16px;
      background: #f9fbff;
      outline: none;
      transition: box-shadow 0.2s ease;
    }
    .input:focus {
      box-shadow: 0 0 0 3px rgba(8,29,77,0.2);
    }
    .send {
      border: none;
      background: var(--vw-blue);
      color: #fff;
      border-radius: 999px;
      padding: 14px 20px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
    }
    .send:hover {
      background: #0c2768;
    }
    .suggest{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
    .suggest button{border:1px solid var(--vw-border);background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}

    /* Mise en forme des r√©ponses IA */
    .check {
      color: var(--vw-blue);
      font-weight: bold;
      margin-right: 6px;
    }
    .bubble ul {
      margin: 12px 0;
      padding-left: 0;
      list-style: none;
    }
    .bubble li {
      list-style: none;
      margin: 8px 0;
      padding-left: 4px;
    }
    .bubble b {
      color: var(--vw-navy);
    }
    .bubble p {
      margin: 10px 0;
    }
    .bubble p:last-child {
      font-style: italic;
      color: var(--vw-muted);
    }

    /* Sticky footer image */
    .sticky-img{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:9999;
      background: transparent;
    }
    .sticky-img img{width:100%;height:auto;display:block}
    body{padding-bottom:120px;}
    @media (max-width: 720px) {
      .sticky-nav .inner { gap: 16px; padding: 8px 12px; }
      .sticky-link span { display: none; }
      .sticky-chat { padding: 10px 14px; }
    }
  </style>
</head>
<body>
  <header>
    <img src="assets/header.png" alt="Navigation Volkswagen" />
  </header>

  <main class="container" role="main">
    <h1>Vos questions, <span style="color:var(--vw-blue)">nos r√©ponses</span></h1>

    <section class="faq" aria-label="FAQ Volkswagen ‚Äì Hybrides">
      <!-- ITEM 1 -->
      <article class="faq-item" id="q-llm" data-faq-id="q-llm" open>
        <header role="button" aria-controls="q-llm-panel" aria-expanded="true" tabindex="0">
          <h3>Je suis un GPT incollable sur les hybrides de Volkswagen, posez moi vos questions.</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q-llm-panel" class="faq-panel" role="region" aria-labelledby="q-llm" style="display:block">
          <div class="ai-box" id="ai-llm">
            <div id="llm-thread"></div>
            <div class="suggest" aria-label="Suggestions de questions" style="margin-top:10px">
              <button class="suggestion-llm">Autonomie √©lectrique r√©elle en ville</button>
              <button class="suggestion-llm">Temps de charge sur wallbox 7,4 kW</button>
              <button class="suggestion-llm">Volume de coffre (banquette en place)</button>
              <button class="suggestion-llm">Peut-on tracter ? Poids max</button>
            </div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <input id="llm-input" class="input" type="text" placeholder="Ex : Quelle est l'autonomie √©lectrique mixte ?" aria-label="Saisissez votre question sur le mod√®le" />
              <button id="llm-send" class="send">J'interroge Volkswagen GPT</button>
            </div>
          </div>
        </div>
      </article>

      <!-- autres items de la FAQ -->
      <article class="faq-item" id="q2" data-faq-id="q2">
        <header role="button" aria-controls="q2-panel" aria-expanded="false" tabindex="0">
          <h3>Quelle est la diff√©rence entre hybride classique et hybride rechargeable&nbsp;?</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q2-panel" class="faq-panel" role="region" aria-labelledby="q2">
          <p class="answer">L‚Äôhybride ¬´ classique ¬ª se recharge en roulant (r√©cup√©ration d‚Äô√©nergie) et offre de courts roulages en √©lectrique. L‚Äôhybride rechargeable (PHEV) se recharge aussi sur prise/bornes et propose une autonomie √©lectrique plus longue au quotidien.</p>
        </div>
      </article>

      <article class="faq-item" id="q3" data-faq-id="q3">
        <header role="button" aria-controls="q3-panel" aria-expanded="false" tabindex="0">
          <h3>Combien de temps faut-il pour recharger une batterie d‚Äôhybride rechargeable&nbsp;?</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q3-panel" class="faq-panel" role="region" aria-labelledby="q3">
          <p class="answer">Sur une prise domestique classique, la recharge compl√®te prend environ 6 √† 8 heures. Avec une wallbox de 7,4 kW, elle se fait en 3 √† 4 heures.</p>
        </div>
      </article>

      <article class="faq-item" id="q4" data-faq-id="q4">
        <header role="button" aria-controls="q4-panel" aria-expanded="false" tabindex="0">
          <h3>Quelle autonomie en mode 100 % √©lectrique peut-on esp√©rer&nbsp;?</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q4-panel" class="faq-panel" role="region" aria-labelledby="q4">
          <p class="answer">Selon le mod√®le, l‚Äôautonomie varie de 50 √† 100 km en tout √©lectrique (WLTP). Cela suffit pour la majorit√© des trajets quotidiens en ville.</p>
        </div>
      </article>

      <article class="faq-item" id="q5" data-faq-id="q5">
        <header role="button" aria-controls="q5-panel" aria-expanded="false" tabindex="0">
          <h3>Peut-on rouler en hybride rechargeable si la batterie est vide&nbsp;?</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q5-panel" class="faq-panel" role="region" aria-labelledby="q5">
          <p class="answer">Oui, le moteur thermique prend automatiquement le relais lorsque la batterie est d√©charg√©e. La voiture fonctionne alors comme un hybride classique.</p>
        </div>
      </article>
      <!-- ... -->
    </section>
  </main>

  <footer>
    <img src="assets/footer.png" alt="Navigation bas de page Volkswagen" />
  </footer>

  <div class="sticky-img" aria-label="Actions bas de page">
    <img src="assets/sticky.png" alt="Liens rapides bas de page Volkswagen" />
  </div>

  <script>
    document.querySelectorAll('.faq-item header').forEach(h=>{
      h.addEventListener('click', ()=> toggle(h));
      h.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); toggle(h);} });
      function toggle(header){
        const item = header.parentElement;
        const expanded = header.getAttribute('aria-expanded') === 'true';
        header.setAttribute('aria-expanded', String(!expanded));
        item.toggleAttribute('open');
      }
    });

    document.addEventListener('DOMContentLoaded', function(){
      const llmThread = document.getElementById('llm-thread');
      const llmInput  = document.getElementById('llm-input');
      const llmSend   = document.getElementById('llm-send');

      function pushLLM(role, text){
        const wrap = document.createElement('div');
        wrap.className = 'msg ' + (role==='user' ? 'user' : 'assistant');
        wrap.innerHTML = '<div class="bubble"></div>';
        wrap.querySelector('.bubble').innerHTML = text;
        llmThread.appendChild(wrap);
        llmThread.scrollTop = llmThread.scrollHeight;
      }

      function streamLLM(){
        const response = `
<b>üí° Mon conseil&nbsp;: <span style=\"color:#081d4d;font-weight:bold\">Passat eHybrid</span></b><br><br>
Si je devais choisir un seul mod√®le <b>polyvalent</b> ‚Äî <b>quotidien</b> + <b>trajets plus longs</b>, sans trop sacrifier le <b>confort</b> ou le <b>co√ªt</b> ‚Äî je pencherais pour la <span style=\"color:#081d4d;font-weight:bold\">Passat eHybrid</span>. Voici pourquoi :
<ul>
  <li><span class=\"check\">‚úì</span><b>Autonomie √©quilibr√©e</b> : bon compromis entre <b>autonomie √©lectrique</b> et <b>autonomie totale</b> (ville + route).</li>
  <li><span class=\"check\">‚úì</span><b>Habitabilit√© & confort</b> : <b>espace g√©n√©reux</b>, <b>coffre pratique</b>, id√©ale pour un <b>usage familial</b>.</li>
  <li><span class=\"check\">‚úì</span><b>Co√ªt d‚Äôusage</b> : souvent plus favorable qu‚Äôun <b>SUV imposant</b> ou un <b>mod√®le tr√®s sportif</b>.</li>
</ul>
<br>
<p>‚öñÔ∏è <b>Si tes besoins sont diff√©rents</b> (performance, <b>famille nombreuse</b>, <b>budget limit√©</b>, <b>usage urbain pur</b>, etc.), un autre mod√®le peut mieux convenir (ex. <span style=\"color:#081d4d;font-weight:bold\">Golf eHybrid</span> pour la ville, <span style=\"color:#081d4d;font-weight:bold\">Tiguan</span> pour plus d‚Äôespace).</p>
<p><i>Souhaites-tu faire un essai de ce v√©hicule&nbsp;?</i></p>
`;

        const wrap = document.createElement('div');
        wrap.className = 'msg assistant';
        wrap.innerHTML = '<div class="bubble"><span class="s"></span></div>';
        const s = wrap.querySelector('.s');
        llmThread.appendChild(wrap);
        llmThread.scrollTop = llmThread.scrollHeight;

        const rawTokens = response.split(/(<[^>]+>|\n|\s{2,})/g);
        const queue = [];
        rawTokens.forEach(tok => {
          if (!tok) return;
          if (tok.startsWith('<') && tok.endsWith('>')) {
            queue.push(tok);
          } else {
            tok.split(/(\s+)/).forEach(t => { if (t) queue.push(t); });
          }
        });

        let i = 0;
        const t = setInterval(() => {
          s.innerHTML += queue[i++] || '';
          llmThread.scrollTop = llmThread.scrollHeight;
          if (i >= queue.length) clearInterval(t);
        }, 40);
      }

      function sendLLM(){
        const q = llmInput.value.trim();
        if(!q) return;
        pushLLM('user', q);
        llmInput.value='';
        streamLLM();
      }

      llmSend.addEventListener('click', sendLLM);
      llmInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendLLM(); }});
      document.querySelectorAll('.suggestion-llm').forEach(b=> b.addEventListener('click', ()=>{ llmInput.value = b.textContent; sendLLM(); }));
    });
  </script>
</body>
</html>
