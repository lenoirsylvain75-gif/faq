<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FAQ Volkswagen ‚Äì Assistant IA</title>
  <style>
    :root{--vw-navy:#0a1a2b;--vw-blue:#081d4d;--vw-text:#0b1320;--vw-muted:#5c6b80;--vw-border:#e5e8ee;--vw-bg:#ffffff;--radius:12px;--shadow:0 0 0 rgba(0,0,0,0);}
    html,body{margin:0;background:var(--vw-bg);color:var(--vw-text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    header, footer{width:100%;margin:0;padding:0}
    header img, footer img{width:100%;height:auto;display:block}
    .container{max-width:980px;margin:48px auto;padding:0 20px}
    h1{font-weight:800;letter-spacing:-.01em;font-size:clamp(28px,4vw,40px);color:var(--vw-navy);margin:0 0 8px}
    .faq{display:block}
    .faq-item{border-bottom:1px solid var(--vw-border);background:transparent}
    .faq-item header{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:22px 0;cursor:pointer}
    .faq-item h3{margin:0;font-size:20px;font-weight:700;color:var(--vw-navy)}
    .faq-item header .chev{transition:transform .2s ease;min-width:22px}
    .faq-item[open] header .chev{transform:rotate(180deg)}
    .faq-panel{padding:0 0 22px 0;display:none}
    .faq-item[open] .faq-panel{display:block}
    .answer{margin:8px 0 0;color:var(--vw-text)}
    .msg{display:flex;gap:12px;margin:10px 0}
    .avatar{display:none}
    .bubble{flex:1;background:#f4f7fd;border:1px solid var(--vw-border);padding:12px;border-radius:12px}
    .msg.user .bubble{background:#eef7ff}
    #llm-thread{max-height:320px;overflow:auto;border:1px solid var(--vw-border);border-radius:12px;background:#fff;padding:10px}
    .input {
      flex: 1;
      border: 2px solid var(--vw-blue);
      border-radius: 999px;
      padding: 14px 16px;
      font-size: 16px;
      background: #f9fbff;
      outline: none;
      transition: box-shadow 0.2s ease;
    }
    .input:focus {
      box-shadow: 0 0 0 3px rgba(8,29,77,0.2);
    }
    .send {
      border: none;
      background: var(--vw-blue);
      color: #fff;
      border-radius: 999px;
      padding: 14px 20px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
    }
    .send:hover {
      background: #0c2768;
    }
    .suggest{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
    .suggest button{border:1px solid var(--vw-border);background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}

    /* Mise en forme des r√©ponses IA */
    .check {
      color: var(--vw-blue);
      font-weight: bold;
      margin-right: 6px;
    }
    .bubble ul {
      margin: 12px 0;
      padding-left: 0;
      list-style: none;
    }
    .bubble li {
      list-style: none;
      margin: 8px 0;
      padding-left: 4px;
    }
    .bubble b {
      color: var(--vw-navy);
    }
    .bubble p {
      margin: 10px 0;
    }
    .bubble p:last-child {
      font-style: italic;
      color: var(--vw-muted);
    }

    /* Sticky footer nav */
    .sticky-nav {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      z-index: 9999;
      background: #fff;
      border-top: 1px solid var(--vw-border);
      box-shadow: 0 -10px 30px rgba(0,0,0,.06);
    }
    .sticky-nav .inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 28px;
    }
    .sticky-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--vw-blue);
      text-decoration: none;
      font-weight: 600;
      white-space: nowrap;
    }
    .sticky-link svg { width: 22px; height: 22px }
    .sticky-chat {
      margin-left: auto;
      background: var(--vw-blue);
      color: #fff;
      border: 0;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 700;
      cursor: pointer;
    }
    body { padding-bottom: 84px; }
    @media (max-width: 720px) {
      .sticky-nav .inner { gap: 16px; padding: 8px 12px; }
      .sticky-link span { display: none; }
      .sticky-chat { padding: 10px 14px; }
    }
  </style>
</head>
<body>
  <header>
    <img src="assets/header.png" alt="Navigation Volkswagen" />
  </header>

  <main class="container" role="main">
    <h1>Vos questions, <span style="color:var(--vw-blue)">nos r√©ponses</span></h1>

    <section class="faq" aria-label="FAQ Volkswagen ‚Äì Hybrides">
      <!-- ITEM 1 -->
      <article class="faq-item" id="q-llm" data-faq-id="q-llm" open>
        <header role="button" aria-controls="q-llm-panel" aria-expanded="true" tabindex="0">
          <h3>Je suis un GPT incollable sur les hybrides de Volkswagen, posez moi vos questions.</h3>
          <svg class="chev" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#233" stroke-width="2" stroke-linecap="round"/></svg>
        </header>
        <div id="q-llm-panel" class="faq-panel" role="region" aria-labelledby="q-llm" style="display:block">
          <div class="ai-box" id="ai-llm">
            <div id="llm-thread"></div>
            <div class="suggest" aria-label="Suggestions de questions" style="margin-top:10px">
              <button class="suggestion-llm">Autonomie √©lectrique r√©elle en ville</button>
              <button class="suggestion-llm">Temps de charge sur wallbox 7,4 kW</button>
              <button class="suggestion-llm">Volume de coffre (banquette en place)</button>
              <button class="suggestion-llm">Peut-on tracter ? Poids max</button>
            </div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <input id="llm-input" class="input" type="text" placeholder="Ex : Quelle est l'autonomie √©lectrique mixte ?" aria-label="Saisissez votre question sur le mod√®le" />
              <button id="llm-send" class="send">J'interroge Volkswagen GPT</button>
            </div>
          </div>
        </div>
      </article>

      <!-- autres items de la FAQ -->
      <!-- ... -->
    </section>
  </main>

  <footer>
    <img src="assets/footer.png" alt="Navigation bas de page Volkswagen" />
  </footer>

  <nav class="sticky-nav" aria-label="Liens rapides bas de page">
    <div class="inner">
      <a class="sticky-link" href="#">
        <svg viewBox="0 0 24 24" fill="none"><path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5Z" stroke="#081d4d" stroke-width="1.8" stroke-linejoin="round"/></svg>
        <span>Page d'accueil</span>
      </a>

      <a class="sticky-link" href="#">
        <svg viewBox="0 0 24 24" fill="none"><path d="M4 15h16M7 11h10M6 7h12" stroke="#081d4d" stroke-width="1.8" stroke-linecap="round"/></svg>
        <span>Configurer</span>
      </a>

      <a class="sticky-link" href="#">
        <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="7" height="7" rx="1.5" stroke="#081d4d" stroke-width="1.8"/><rect x="14" y="4" width="7" height="7" rx="1.5" stroke="#081d4d" stroke-width="1.8"/><rect x="3" y="13" width="7" height="7" rx="1.5" stroke="#081d4d" stroke-width="1.8"/><rect x="14" y="13" width="7" height="7" rx="1.5" stroke="#081d4d" stroke-width="1.8"/></svg>
        <span>D√©couvrir les mod√®les</span>
      </a>

      <a class="sticky-link" href="#">
        <svg viewBox="0 0 24 24" fill="none"><path d="M4 12.5 12.5 4a1 1 0 0 1 1.4 0L20 10.1a1 1 0 0 1 0 1.4L11.4 20a1 1 0 0 1-1.4 0L4 14.6a1 1 0 0 1 0-1.4Z" stroke="#081d4d" stroke-width="1.8"/><circle cx="16" cy="8" r="1.5" fill="#081d4d"/></svg>
        <span>D√©couvrir les offres</span>
      </a>

      <button class="sticky-chat" type="button">
        <svg viewBox="0 0 24 24" fill="none" style="vertical-align:middle;margin-right:8px">
          <path d="M4 5h16a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H9l-4 3v-3H4a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z" stroke="#ffffff" stroke-width="1.8" stroke-linejoin="round"/>
        </svg>
        Chat
      </button>
    </div>
  </nav>

  <script>
    document.querySelectorAll('.faq-item header').forEach(h=>{
      h.addEventListener('click', ()=> toggle(h));
      h.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); toggle(h);} });
      function toggle(header){
        const item = header.parentElement;
        const expanded = header.getAttribute('aria-expanded') === 'true';
        header.setAttribute('aria-expanded', String(!expanded));
        item.toggleAttribute('open');
      }
    });

    document.addEventListener('DOMContentLoaded', function(){
      const llmThread = document.getElementById('llm-thread');
      const llmInput  = document.getElementById('llm-input');
      const llmSend   = document.getElementById('llm-send');

      function pushLLM(role, text){
        const wrap = document.createElement('div');
        wrap.className = 'msg ' + (role==='user' ? 'user' : 'assistant');
        wrap.innerHTML = '<div class="bubble"></div>';
        wrap.querySelector('.bubble').innerHTML = text;
        llmThread.appendChild(wrap);
        llmThread.scrollTop = llmThread.scrollHeight;
      }

      function streamLLM(){
        const response = `
<b>üí° Mon conseil&nbsp;: Passat eHybrid</b><br><br>
Si je devais choisir un seul mod√®le <b>polyvalent</b> ‚Äî <b>quotidien</b> + <b>trajets plus longs</b>, sans trop sacrifier le confort ou le co√ªt ‚Äî je pencherais pour la <b>Passat eHybrid</b>. Voici pourquoi :
<ul>
  <li><span class="check">‚úì</span><b>Autonomie √©quilibr√©e</b> : bon compromis entre <b>autonomie √©lectrique</b> et <b>autonomie totale</b> (ville + route).</li>
  <li><span class="check">‚úì</span><b>Habitabilit√© & confort</b> : espace g√©n√©reux, <b>coffre pratique</b>, id√©ale pour un usage familial.</li>
  <li><span class="check">‚úì</span><b>Co√ªt d‚Äôusage</b> : souvent plus favorable qu‚Äôun <b>SUV imposant</b> ou un <b>mod√®le tr√®s sportif</b>.</li>
</ul>
<br>
<p>‚öñÔ∏è <b>Si tes besoins sont diff√©rents</b> (performance, famille nombreuse, budget limit√©, usage urbain pur, etc.), un autre mod√®le peut mieux convenir (ex. <b>Golf eHybrid</b> pour la ville, <b>Tiguan</b> pour plus d‚Äôespace).</p>
<p><i>Souhaites-tu faire un essai de ce v√©hicule&nbsp;?</i></p>
`;

        const wrap = document.createElement('div');
        wrap.className = 'msg assistant';
        wrap.innerHTML = '<div class="bubble"><span class="s"></span></div>';
        const s = wrap.querySelector('.s');
        llmThread.appendChild(wrap);
        llmThread.scrollTop = llmThread.scrollHeight;

        const rawTokens = response.split(/(<[^>]+>|\n|\s{2,})/g);
        const queue = [];
        rawTokens.forEach(tok => {
          if (!tok) return;
          if (tok.startsWith('<') && tok.endsWith('>')) {
            queue.push(tok);
          } else {
            tok.split(/(\s+)/).forEach(t => { if (t) queue.push(t); });
          }
        });

        let i = 0;
        const t = setInterval(() => {
          s.innerHTML += queue[i++] || '';
          llmThread.scrollTop = llmThread.scrollHeight;
          if (i >= queue.length) clearInterval(t);
        }, 40);
      }

      function sendLLM(){
        const q = llmInput.value.trim();
        if(!q) return;
        pushLLM('user', q);
        llmInput.value='';
        streamLLM();
      }

      llmSend.addEventListener('click', sendLLM);
      llmInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendLLM(); }});
      document.querySelectorAll('.suggestion-llm').forEach(b=> b.addEventListener('click', ()=>{ llmInput.value = b.textContent; sendLLM(); }));
    });
  </script>
</body>
</html>
